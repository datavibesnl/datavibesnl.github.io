"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5941],{7634:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var i=n(4848),t=n(8453);const r={},o="1.7 Creating a Cluster",l={id:"Databricks Certified Data Engineer Associate - Preparation/Introduction/1.7 Creating Cluster",title:"1.7 Creating a Cluster",description:"Walkthrough - How to setup a single-node cluster",source:"@site/docs/Databricks Certified Data Engineer Associate - Preparation/1. Introduction/1.7 Creating Cluster.md",sourceDirName:"Databricks Certified Data Engineer Associate - Preparation/1. Introduction",slug:"/Databricks Certified Data Engineer Associate - Preparation/Introduction/1.7 Creating Cluster",permalink:"/docs/Databricks Certified Data Engineer Associate - Preparation/Introduction/1.7 Creating Cluster",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"1.6 Course Materials",permalink:"/docs/Databricks Certified Data Engineer Associate - Preparation/Introduction/1.6 Course Materials"},next:{title:"1.8 Notebook Fundamentals",permalink:"/docs/Databricks Certified Data Engineer Associate - Preparation/Introduction/1.8 Notebook Fundamentals"}},a={},c=[{value:"Walkthrough - How to setup a single-node cluster",id:"walkthrough---how-to-setup-a-single-node-cluster",level:2},{value:"Navigate to the Compute menu",id:"navigate-to-the-compute-menu",level:3},{value:"Overview of multi-node cluster configuration options",id:"overview-of-multi-node-cluster-configuration-options",level:2},{value:"Select the Databricks Runtime version (VM image)",id:"select-the-databricks-runtime-version-vm-image",level:3},{value:"Specify the configuration of the worker nodes",id:"specify-the-configuration-of-the-worker-nodes",level:3},{value:"Specify the requirements for the worker nodes",id:"specify-the-requirements-for-the-worker-nodes",level:4},{value:"Specify the number of worker nodes",id:"specify-the-number-of-worker-nodes",level:4},{value:"Enable auto scaling",id:"enable-auto-scaling",level:3},{value:"Specify the configuration for the driver node",id:"specify-the-configuration-for-the-driver-node",level:3},{value:"Enable auto-termination",id:"enable-auto-termination",level:3},{value:"Check the cluster configuration summary",id:"check-the-cluster-configuration-summary",level:3},{value:"Walkthrough - How to setup a single-node cluster [Continued]",id:"walkthrough---how-to-setup-a-single-node-cluster-continued",level:2}];function d(e){const s={admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",input:"input",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h1,{id:"17-creating-a-cluster",children:"1.7 Creating a Cluster"}),"\n",(0,i.jsx)(s.h2,{id:"walkthrough---how-to-setup-a-single-node-cluster",children:"Walkthrough - How to setup a single-node cluster"}),"\n",(0,i.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","The next step in setting up your environment is to create a cluster.",(0,i.jsx)("br",{})]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"navigate-to-the-compute-menu",children:"Navigate to the Compute menu"}),"\n",(0,i.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Navigate to ",(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"Compute"})})," in the left side bar",(0,i.jsx)("br",{})]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","From here, we can create and manage our clusters"]}),"\n",(0,i.jsxs)(s.admonition,{type:"info",children:[(0,i.jsxs)(s.p,{children:["Remember, a cluster is a set of nodes or computers working together like a single entity.",(0,i.jsx)("br",{})]}),(0,i.jsxs)(s.p,{children:["It consists of a master node called the ",(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"Driver"})})," and some other worker nodes.",(0,i.jsx)("br",{})]}),(0,i.jsxs)(s.p,{children:["The ",(0,i.jsx)(s.strong,{children:"Driver node"})," is responsible for coordinating the ",(0,i.jsx)(s.em,{children:"workers"})," and their parallel execution of tasks"]})]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Under all-purpose compute, click ",(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"Create compute"})}),(0,i.jsx)("br",{})]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Click on the default name in order to change it. Name your cluster as ",(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"Demo Cluster"})}),", for example",(0,i.jsx)("br",{})]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Leave the policy ",(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"Unrestricted"})})," to create fully configurable cluster",(0,i.jsx)("br",{})]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Your cluster could be ",(0,i.jsx)(s.strong,{children:"multi-node"}),", that is having multiple workers, or simply a ",(0,i.jsx)(s.strong,{children:"single node"})]}),"\n",(0,i.jsx)(s.admonition,{type:"info",children:(0,i.jsx)(s.p,{children:"A single node has no workers and run Spark jobs on the driver node"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","For this course, a single node is enough. However, let us continue to see how to configure a ",(0,i.jsx)(s.strong,{children:"multi-node"})," cluster"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"overview-of-multi-node-cluster-configuration-options",children:"Overview of multi-node cluster configuration options"}),"\n",(0,i.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","For the ",(0,i.jsx)(s.strong,{children:"access mode"}),", you can allow your cluster to be shared by multiple users"]}),"\n",(0,i.jsx)(s.admonition,{type:"info",children:(0,i.jsxs)(s.p,{children:["However, only SQL and Python workloads will be supported",(0,i.jsx)("br",{}),"\nChoose ",(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"Single user"})})," if you are the only one to use this cluster"]})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"select-the-databricks-runtime-version-vm-image",children:"Select the Databricks Runtime version (VM image)"}),"\n",(0,i.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","You need to select the Databricks runtime version"]}),"\n",(0,i.jsx)(s.admonition,{type:"info",children:(0,i.jsx)(s.p,{children:"Databricks runtime is the virtual machine's image that comes with pre-installed libraries, which has a specific version of Spark, Scala and other libraries"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Choose 11.3 LTS, which is the latest version at the time of recording this course"]}),"\n",(0,i.jsx)(s.admonition,{type:"note",children:(0,i.jsxs)(s.p,{children:["You can choose to activate ",(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"Photon"})}),", which is a vectorized query engine developed in ",(0,i.jsx)(s.strong,{children:"C++"})," to enhance Spark performance"]})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"specify-the-configuration-of-the-worker-nodes",children:"Specify the configuration of the worker nodes"}),"\n",(0,i.jsx)(s.h4,{id:"specify-the-requirements-for-the-worker-nodes",children:"Specify the requirements for the worker nodes"}),"\n",(0,i.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","You can go ahead and select the configuration of your worker nodes"]}),"\n",(0,i.jsxs)(s.admonition,{type:"info",children:[(0,i.jsxs)(s.p,{children:["These are different virtual machines sizes provided by your cloud provider",(0,i.jsx)("br",{})]}),(0,i.jsx)(s.p,{children:"Depending on your requirements of memory cores and hard disk, you can select the configuration"})]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Let's keep the default one ",(0,i.jsx)("br",{})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h4,{id:"specify-the-number-of-worker-nodes",children:"Specify the number of worker nodes"}),"\n",(0,i.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","You can select the ",(0,i.jsx)(s.strong,{children:"number of workers"})," you need for your cluster ",(0,i.jsx)("br",{})]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"enable-auto-scaling",children:"Enable auto scaling"}),"\n",(0,i.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","If you choose to enable auto scaling, then provide a range for the number of workers"]}),"\n",(0,i.jsxs)(s.admonition,{type:"info",children:[(0,i.jsxs)(s.p,{children:["These allow Databricks to resize your cluster automatically within this range",(0,i.jsx)("br",{})]}),(0,i.jsx)(s.p,{children:"Otherwise disable auto scaling and use a fixed number of workers"})]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Let me select ",(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"3"})})," here ",(0,i.jsx)("br",{})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"specify-the-configuration-for-the-driver-node",children:"Specify the configuration for the driver node"}),"\n",(0,i.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","You can now select the configuration for the ",(0,i.jsx)(s.strong,{children:"Driver node"})," or simply keep it the same as the worker ",(0,i.jsx)("br",{})]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"enable-auto-termination",children:"Enable auto-termination"}),"\n",(0,i.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","You can enable ",(0,i.jsx)(s.strong,{children:"auto-termination"})," of the cluster by providing the ",(0,i.jsx)(s.strong,{children:"number of minutes"})," ",(0,i.jsx)("br",{})]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Let's say 30 minutes. That is, if there is no activity for 30 minutes, the cluster will auto-terminate ",(0,i.jsx)("br",{})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"check-the-cluster-configuration-summary",children:"Check the cluster configuration summary"}),"\n",(0,i.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","On the right, you can see a summary of your cluster configuration. Here you can see the number of DBUs"]}),"\n",(0,i.jsx)(s.admonition,{type:"info",children:(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"DBU"})})," stand for Databricks Unit and it is a unit of a processing capability per hour"]})}),"\n",(0,i.jsx)(s.admonition,{type:"note",children:(0,i.jsxs)(s.p,{children:["Each configuration tells you how much ",(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"DBUs"})})," would be consumed if a virtual machine runs for an hour and then you pay for each DBU consumed"]})}),"\n",(0,i.jsx)(s.admonition,{type:"info",children:(0,i.jsx)(s.p,{children:"For example, if we have less number of workers or even a single node cluster, we will have less DBUs"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"walkthrough---how-to-setup-a-single-node-cluster-continued",children:"Walkthrough - How to setup a single-node cluster [Continued]"}),"\n",(0,i.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Select ",(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"Single Node"})})," cluster ",(0,i.jsx)("br",{})]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Click ",(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"Confirm"})})]}),"\n",(0,i.jsx)(s.admonition,{type:"info",children:(0,i.jsx)(s.p,{children:"With a single node cluster, we are going to consume less DBUs"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Hit the ",(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"Create"})})," button to finish creating our cluster"]}),"\n",(0,i.jsx)(s.admonition,{type:"info",children:(0,i.jsx)(s.p,{children:"Azure will now go ahead and provision the required virtual machine with a specific configuration and libraries as specified by Databricks runtime"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Our cluster is now up and running ",(0,i.jsx)("br",{})]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","To access your cluster at any time, you can simply navigate to ",(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"Compute"})})," in the left side bar ",(0,i.jsx)("br",{})]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","You can see your clusters are listed here with its current status ",(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"Running"})})," or ",(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"Terminated"})}),". ",(0,i.jsx)("br",{})]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","You can even edit the cluster by clicking on its name. Then click ",(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.code,{children:"Edit"})})]}),"\n",(0,i.jsx)(s.admonition,{type:"info",children:(0,i.jsx)(s.p,{children:"Remember, changing the cluster configuration may require a restart of the cluster"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Let's cancel this ",(0,i.jsx)("br",{})]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:["\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","In the cluster page, you can notice two things"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["The ",(0,i.jsx)(s.strong,{children:"event log"})," shows all the events that have happened with the cluster"]}),"\n",(0,i.jsx)(s.admonition,{type:"info",children:(0,i.jsx)(s.p,{children:"For example, when the cluster was created or terminated. This helps to track the activity on a cluster"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["In the ",(0,i.jsx)(s.strong,{children:"driver log"}),", you will get the log generated within the cluster notebooks and libraries ",(0,i.jsx)("br",{})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Let's now terminate our cluster"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>l});var i=n(6540);const t={},r=i.createContext(t);function o(e){const s=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);